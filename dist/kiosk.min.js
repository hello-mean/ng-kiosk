angular.module("templates/kiosk-nav.html",[]).run(["$templateCache",function(a){a.put("templates/kiosk-nav.html",'<div>\n    <nav>\n        <ul>\n            <li ng-class="{\'is-active\': kiosk.topics.index === $index}" ng-repeat="topic in kiosk.topics">\n                <a ng-click="kiosk.safe.setCurrentTopic($index)" href="#{{topic.url}}">{{topic.title}}</a>\n            </li>\n        </ul>\n    </nav>\n    <div>\n        <button ng-click="kiosk.safe.prev()" type="button">Prev</button>\n        <button ng-click="kiosk.safe.next()" type="button">Next</button>\n    </div>\n</div>\n')}]),angular.module("templates/kiosk.html",[]).run(["$templateCache",function(a){a.put("templates/kiosk.html",'<div class="kiosk" ng-class="state">\n    <ul class="kiosk-slides">\n        <li class="kiosk-slide" ng-repeat="slide in kiosk.slides" ng-bind-html="slide.content" ng-controller="SlideController" ng-show="isCurrentSlide()">\n        </li>\n    </ul>\n    <div ng-transclude></div>\n</div>\n')}]),angular.module("ng-kiosk",["ngSanitize","ng-kiosk.mapping","templates/kiosk.html","templates/kiosk-nav.html"]).directive("kiosk",[function(){return{restrict:"E",controller:"KioskController",templateUrl:"templates/kiosk.html",replace:!0,transclude:!0,scope:{src:"@"}}}]).controller("KioskController",["$scope","$http","map","Kiosk",function(a,b,c,d){var e=this,f=function(b){a.setSlides(b.data),a.setState("is-ready")};if(a.kiosk=d,this.findTopicByUrl=function(b){return a._topics._embedded.topic.reduce(function(a,c){return c._links.self.href===b?c:a})},a.$watch("kiosk.topics.current",function(c,d){var g=d&&a._topics;if(g){var h=e.findTopicByUrl(c.url);h&&b.get(h._links.slide.href).then(f)}}),!a.src)throw new Error("kiosk src attribute not set");b.get(a.src).then(function(c){return a.setRoot(c.data),b.get(a._root._links.topic.href)}).then(function(c){return a.setTopics(c.data),b.get(a._topics._embedded.topic[0]._links.slide.href)}).then(f).catch(function(){a.setState("is-error")}),a.setRoot=function(b){a._root=b,a.kiosk.safe.setConfiguration(c.configuration(b))},a.setTopics=function(b){a._topics=b,a.kiosk.safe.setTopics(c.topics(b))},a.setSlides=function(b){a._slides=b,a.kiosk.safe.setSlides(c.slides(b))},a.setState=function(b){a.state=b,a.$broadcast("kiosk:"+b),a.$emit("kiosk:"+b)},a.setState("is-initializing")}]).controller("SlideController",["$scope","Kiosk",function(a,b){a.isCurrentSlide=function(){return a.slide.id===b.slides.current.id}}]).directive("kioskNav",["Kiosk",function(a){return{require:"^kiosk",restrict:"E",replace:!0,controller:["$scope",function(b){b.kiosk=a}],templateUrl:"templates/kiosk-nav.html"}}]),angular.module("ng-kiosk").factory("Kiosk",["$rootScope",function(a){function b(a){return function(){var b=arguments;c.$apply(function(){d[a].apply(e,b)})}}var c=a.$new(),d={setTopics:function(a){c.topics=a,d.setCurrentTopic(0)},setSlides:function(a){c.slides=a,d.setCurrentSlide(0)},addSlide:function(a){c.slides.push(a)},setConfiguration:function(a){c.configuration=a},setCurrentSlide:function(a){if(!c.slides[a])throw new Error("No slide at index "+a);c.slides.index=a,c.slides.current=c.slides[a]},next:function(){var a=c.slides.length-1,b=c.slides.index===a?0:c.slides.index+1;d.setCurrentSlide(b)},prev:function(){var a=c.slides.index-1,b=0===c.slides.index?c.slides.length-1:a;d.setCurrentSlide(b)},nextTopic:function(){var a=c.topics.length-1,b=c.topics.index===a?0:c.topics.index+1;d.setCurrentTopic(b)},prevTopic:function(){var a=c.topics.index-1,b=0===c.topics.index?c.topics.length-1:a;d.setCurrentTopic(b)},setCurrentTopic:function(a){if(!c.topics[a])throw new Error("No topic at index "+a);c.topics.index=a,c.topics.current=c.topics[a]}},e={scope:c};for(var f in d)e[f]=b(f);return e.safe=d,Object.defineProperty(e,"topics",{get:function(){return c.topics}}),Object.defineProperty(e,"slides",{get:function(){return c.slides}}),e}]),angular.module("ng-kiosk.mapping",[]).factory("map",function(){return{topics:function(a){return a._embedded.topic.map(function(a){return{title:a.title,url:a._links.self.href}})},slides:function(a){return a._embedded.slide.map(function(a){return{content:a.content,id:a.id}})},configuration:function(a){var b=angular.copy(a);return delete b._links,delete b._embedded,b}}});